<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href="c3-0.3.0/c3.css" rel="stylesheet" type="text/css">
	<script src="c3-0.3.0/d3.min.js" charset="utf-8"></script>
	<script src="c3-0.3.0/c3.min.js"></script>
</head>
<body onload="init()">

	<div id="main">
		<div id="poster">
			<img id="imagePoster">
		</div>
		<div class="textSection" id="movie_info">
			<p id="title">Title: </p>
			<p id="overview">Description: </p>
			<p id="genres">Genres: </p>
			<p id="vote_average">Vote average: </p>
		</div>
		<div class="textSection" id="twitter_stream">
			<p>Tweet...</p>
		</div>
		<div class="diagram" id="diagram">
			<div id="chart1"></div>
			<div id="chart2"></div>
		</div>
		<div id="search"></div>
	</div>
	<script type="text/javascript">

	function init() {
		$.ajax({
            url: "json.php",
            async: false,
            dataType: 'json',
            success: function(data) {
                movieJSON = data;
            }
        });
         
         $("#title").text(movieJSON.title);
         $("#overview").text(movieJSON.overview);
         $("#vote_average").text(movieJSON.vote_average);
         $("#imagePoster").attr("src", "https://image.tmdb.org/t/p/w500" + movieJSON.poster_path);
         $("body").css('background-image', 'url(' + 'https://image.tmdb.org/t/p/w780' + movieJSON.backdrop_path +')');

	};

var chart1 = c3.generate({
	bindto: '#chart1',
	size: {
        height: 240,
        width: 240
    },
    data: {
        columns: [
        	['Budget', 1.5],
            ['Opening Weekend', 0.345],
            ['Gross Total', 3.7],
        ],
        type : 'donut',
        onclick: function (d, i) { console.log("onclick", d, i); },
        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },
    donut: {
        title: "Box Office"
    },
    tooltip: {
        format: {
            value: function (value, id) {
                var format = d3.format('$');
                return (value >= 1) ? format(value) + 'MM' : format(value) + 'M';
            }
        }
    }
});

var chart2 = c3.generate({
	bindto: '#chart2',
	size: {
        height: 240,
        width: 240
    },
    data: {
        columns: [
        	['Positives', 152],
            ['Negatives', 96],
        ],
        type : 'donut',
            colors: {
            Positives: '#00c060',
            Negatives: '#db4437',
        },
        onclick: function (d, i) { console.log("onclick", d, i); },
        onmouseover: function (d, i) { console.log("onmouseover", d, i); },
        onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },
    donut: {
        title: "Tweets"
    },
    tooltip: {
        format: {
            value: function (value, id) {
                return value+" tweets";
            }
        }
    }
});


	</script>
</body>
</html>